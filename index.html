<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MATRIX - البداية</title>
  <link rel="stylesheet" href="assets/css/style.css" />
</head>
<body>
  <canvas id="matrix-canvas"></canvas>

  <main class="page">
    <header class="logo">MATRIX</header>

    <section class="card">
      <div class="welcome">
        <p class="intro">استيقظ يا صاح ... من أنت؟<br><span class="en">wake up bro ... who are you?</span></p>
        <input type="text" id="username" class="input" placeholder="اكتب اسمك هنا..." />
        <button class="btn" id="startBtn">دخول</button>
      </div>

      <div class="rules hidden" id="rules">
        <p>1- انت وحدك في هذا العالم<br><span class="en">you are alone in this world</span></p>
        <p>2- اقرأ .. افهم .. حلل .. اتخذ قرار<br><span class="en">Read.. Understand.. Analyze.. Make a decision</span></p>
        <p>3- امضِ للأمام .. لا رجوع .. لا استسلام<br><span class="en">Move forward.. no turning back.. never give up</span></p>
        <p class="ready">هل أنت جاهز؟<br><span class="en">are you ready?</span></p>
        <div class="choices">
          <button class="btn" id="acceptBtn">موافقة</button>
          <button class="btn ghost" id="rejectBtn">رفض</button>
        </div>
        <p class="message hidden" id="rejectMsg">العالم مليء بالجبناء والآن زادوا واحدًا<br><span class="en">The world is full of cowards and now they have increased one</span></p>
      </div>
    </section>
  </main>

  <script>
    // خلفية ماتركس
    const canvas = document.getElementById("matrix-canvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const glyphs = "آأبتثجحخدذرزسشصضطظعغفقكلمنهوىي؟؛،ـ";
    const fontSize = 16;
    const columns = Math.floor(canvas.width / fontSize);
    const drops = Array(columns).fill(1);

    function drawMatrix() {
      ctx.fillStyle = "rgba(0, 0, 0, 0.08)";
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "#00ff7b";
      ctx.font = fontSize + "px monospace";

      for (let i = 0; i < drops.length; i++) {
        const text = glyphs[Math.floor(Math.random() * glyphs.length)];
        ctx.fillText(text, i * fontSize, drops[i] * fontSize);
        if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
          drops[i] = 0;
        }
        drops[i]++;
      }
      requestAnimationFrame(drawMatrix);
    }
    drawMatrix();

    // التفاعل
    const startBtn = document.getElementById("startBtn");
    const usernameInput = document.getElementById("username");
    const rulesSection = document.getElementById("rules");
    const acceptBtn = document.getElementById("acceptBtn");
    const rejectBtn = document.getElementById("rejectBtn");
    const rejectMsg = document.getElementById("rejectMsg");

    startBtn.addEventListener("click", () => {
      const name = usernameInput.value.trim();
      if (name) {
        localStorage.setItem("matrix_username", name);
        rulesSection.classList.remove("hidden");
      }
    });

    acceptBtn.addEventListener("click", () => {
      window.location.href = "main.html";
    });

    rejectBtn.addEventListener("click", () => {
      rejectMsg.classList.remove("hidden");
    });
  </script>
</body>
</html>
